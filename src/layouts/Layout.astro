---
// src/layouts/Layout.astro
import CookieBanner from "../components/CookieBanner.astro";

interface Props {
  title: string;
  description?: string;
  image?: string;
  canonical?: string;
}

const {
  title,
  description = "Licencjackie.pl - Wszystko o pisaniu prac dyplomowych. Poradniki, tematy prac, metodologia bada≈Ñ i pomoc w pisaniu prac licencjackich i magisterskich.",
  image = "/og-default.jpg",
  canonical,
} = Astro.props;

const siteUrl = "https://www.licencjackie.pl";
const fullImageUrl = image.startsWith("http") ? image : `${siteUrl}${image}`;
---

<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />

    <title>{title}</title>

    <!-- Canonical -->
    {canonical && <link rel="canonical" href={canonical} />}

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={fullImageUrl} />
    <meta property="og:locale" content="pl_PL" />
    <meta property="og:site_name" content="Licencjackie.pl" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={fullImageUrl} />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Preconnect to Google domains for faster loading after consent -->
    <link rel="preconnect" href="https://www.googletagmanager.com" />
    <link rel="preconnect" href="https://www.google-analytics.com" />

    <slot name="head" />
  </head>
  <body class="bg-white text-gray-900 font-sans antialiased">
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-KD2J9KWN"
        height="0"
        width="0"
        style="display:none;visibility:hidden"
        title="Google Tag Manager"></iframe>
    </noscript>

    <slot />

    <!-- Cookie Consent Banner -->
    <CookieBanner />
  </body>
</html>

<style is:global>
  html {
    scroll-behavior: smooth;
  }

  .text-gradient {
    background: linear-gradient(135deg, #10b981 0%, #0ea5e9 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .prose {
    max-width: 65ch;
  }

  .prose h2 {
    @apply text-2xl font-bold text-gray-900 mt-10 mb-4;
  }

  .prose h3 {
    @apply text-xl font-semibold text-gray-900 mt-8 mb-3;
  }

  .prose p {
    @apply text-gray-700 leading-relaxed mb-4;
  }

  .prose ul,
  .prose ol {
    @apply my-4 pl-6;
  }

  .prose li {
    @apply text-gray-700 mb-2;
  }

  .prose ul li {
    @apply list-disc;
  }

  .prose ol li {
    @apply list-decimal;
  }

  .prose a {
    @apply text-primary-600 hover:text-primary-700 underline;
  }

  .prose table {
    @apply w-full my-6 border-collapse;
  }

  .prose th,
  .prose td {
    @apply border border-gray-300 px-4 py-2 text-left;
  }

  .prose th {
    @apply bg-gray-100 font-semibold;
  }

  .prose blockquote {
    @apply border-l-4 border-primary-500 pl-4 italic my-4 text-gray-600;
  }

  .prose strong {
    @apply font-semibold text-gray-900;
  }
</style>
